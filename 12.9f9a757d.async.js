(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"36SN":function(me,I,s){"use strict";s.r(I),s.d(I,"Column",function(){return fe}),s.d(I,"Line",function(){return Ee}),s.d(I,"PivotTable",function(){return Te});var F=s("0Owb"),M=s("PpiC"),w=s("q1tI"),b=s.n(w),J=s("06Lf");function $(e){var l=[],h=[];return e.forEach(t=>{t.isDim?l.push(t):h.push(t)}),{metaDim:l,metaInd:h}}function B(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:12;return+parseFloat(e==null?void 0:e.toPrecision(l))}var U=()=>b.a.createElement("div",{style:{color:"rgba(0,0,0,.85)",backgroundColor:"#fff2f0",fontSize:14,border:"1px solid #ffccc7",padding:"8px 15px"}},"\u2757\uFE0F\u4F20\u5165\u7684\u6307\u6807\u6570\u76EE\u6709\u8BEF\uFF01");function te(e,l){var h=$(e),t=h.metaDim,a=h.metaInd;if(a.length>=1&&t.length===0){var u="type",p="value";return{xField:u,yField:p,data:l.map(v=>a.map(d=>{var E=d.id,T=d.name;return{[u]:E,[p]:v[E]}})).flat(),meta:{[u]:{formatter:v=>{var d;return((d=e.find(E=>{var T=E.id;return v===T}))===null||d===void 0?void 0:d.name)||v}}},tooltip:{formatter:v=>{var d,E=v[u],T=v[p];return{name:(d=e.find(L=>{var V=L.id;return E===V}))===null||d===void 0?void 0:d.name,value:T}}}}}else if(a.length===1&&t.length===1){var f,c,i,C=(f=t.shift())===null||f===void 0?void 0:f.id,x=(c=a.shift())===null||c===void 0?void 0:c.id;return{data:l,xField:C,yField:x,meta:{[x]:{alias:(i=e.find(v=>{var d=v.id;return d===x}))===null||i===void 0?void 0:i.name}}}}else if(a.length>1&&t.length===1){var R,N=(R=t.shift())===null||R===void 0?void 0:R.id,K="value",D="type";return{data:l.map(v=>a.map(d=>{var E=d.id,T=d.name;return{[N]:v[N],[K]:v[E],[D]:T}})).flat(),xField:N,yField:K,seriesField:D,isGroup:!0}}else if(a.length===1&&t.length===2){var j,O,S;return{data:l,xField:(j=t.shift())===null||j===void 0?void 0:j.id,yField:(O=a.shift())===null||O===void 0?void 0:O.id,seriesField:(S=t.shift())===null||S===void 0?void 0:S.id,isGroup:!0}}return{data:l,xField:"",yField:""}}var pe=e=>{var l=e.className,h=e.style,t=e.meta,a=t===void 0?[]:t,u=e.data,p=u===void 0?[]:u,f=e.inverted,c=Object(M.default)(e,["className","style","meta","data","inverted"]);if(f){var i=te(a,p),C=i.xField,x=i.yField,R=Object(M.default)(i,["xField","yField"]);return b.a.createElement(J.b,Object(F.default)({xField:x,yField:C},R,{renderer:"svg",errorTemplate:()=>b.a.createElement(U,null)},c))}else return b.a.createElement(J.c,Object(F.default)({},te(a,p),{renderer:"svg",errorTemplate:()=>b.a.createElement(U,null)},c))},fe=pe,ae=s("k1fw"),re=s("sGjT");function ge(e,l){var h=$(e),t=h.metaDim,a=h.metaInd;if(a.length===1&&t.length===1){var u,p=t.shift(),f=a.shift(),c=p.id,i=f.id;return{data:l,xField:c,yField:i,yAxis:{label:{formatter:n=>f.isRate?"".concat(B(100*Number(n)),"%"):n}},tooltip:{formatter:n=>{var m=n[c],g=n[i];return{name:f.name,value:f.isRate?"".concat(B(100*Number(g)),"%"):g}}},meta:{[i]:{alias:(u=e.find(n=>{var m=n.id;return m===i}))===null||u===void 0?void 0:u.name}}}}else if(a.length===1&&t.length===2){var C=t.shift(),x=a.shift(),R=t.shift(),N=C.id,K=x.id,D=R.id;return{data:l,xField:N,yField:K,seriesField:D,yAxis:{label:{formatter:n=>x.isRate?"".concat(B(100*Number(n)),"%"):n}},tooltip:{formatter:n=>{var m=n[D],g=n[K];return{name:m,value:x.isRate?"".concat(B(100*Number(g)),"%"):g}}}}}else if(a.length===2&&t.length===2){var j,O,S,v,d=l.map(n=>{var m=a[0].id,g=t[1].id,H=n[m],G=n[g],W=Object(M.default)(n,[m,g].map(re.a));return Object(ae.a)({[t[1].id]:"".concat(G,"-").concat(a[0].name)},W)}),E=l.map(n=>{var m=a[1].id,g=t[1].id,H=n[m],G=n[g],W=Object(M.default)(n,[m,g].map(re.a));return Object(ae.a)({[t[1].id]:"".concat(G,"-").concat(a[1].name)},W)});return{data:[E,d],geometryOptions:[{geometry:"line",seriesField:t[1].id},{geometry:"line",seriesField:t[1].id,lineStyle:{lineDash:[5,5]}}],xField:(j=t.shift())===null||j===void 0?void 0:j.id,yField:[(O=a.shift())===null||O===void 0?void 0:O.id,(S=a.shift())===null||S===void 0?void 0:S.id],seriesField:(v=t.shift())===null||v===void 0?void 0:v.id}}else if(a.length>1&&t.length===1){var T,L=(T=t.shift())===null||T===void 0?void 0:T.id,V="value",Z="type";return{data:l.map(n=>a.map(m=>{var g=m.id,H=m.name;return{[L]:n[L],[V]:n[g],[Z]:H}})).flat(),xField:L,yField:V,seriesField:Z}}return{data:l}}var be=e=>{var l=e.className,h=e.style,t=e.meta,a=t===void 0?[]:t,u=e.data,p=u===void 0?[]:u,f=e.withArea,c=Object(M.default)(e,["className","style","meta","data","withArea"]),i=ge(a,p);return f?b.a.createElement(J.a,Object(F.default)({},i,{renderer:"svg",errorTemplate:()=>b.a.createElement(U,null)},c)):Array.isArray(i.yField)?b.a.createElement(J.d,Object(F.default)({},i,{renderer:"svg",errorTemplate:()=>b.a.createElement(U,null)},c)):b.a.createElement(J.e,Object(F.default)({},i,{renderer:"svg",errorTemplate:()=>b.a.createElement(U,null)},c))},Ee=be,Y=s("tJVT"),z=s("mA+x"),he=s("aMEK"),Le=s("ARb9"),xe=e=>{var l=e.className,h=e.style,t=e.showSubtotal,a=t===void 0?!0:t,u=e.subtotalText,p=u===void 0?["\u603B\u8BA1","\u5C0F\u8BA1"]:u,f=e.meta,c=f===void 0?[]:f,i=e.data,C=i===void 0?[]:i,x=e.size,R=x===void 0?"middle":x,N=e.indicatorSide,K=N===void 0?"top":N,D=e.leftDimensionLength,j=D===void 0?c.length:D,O=e.leftExpandable,S=O===void 0?!1:O,v=e.topExpandable,d=v===void 0?!1:v,E=e.defaultExpandAll,T=E===void 0?!0:E,L=e.cellRender,V=Object(M.default)(e,["className","style","showSubtotal","subtotalText","meta","data","size","indicatorSide","leftDimensionLength","leftExpandable","topExpandable","defaultExpandAll","cellRender"]),Z=Object(w.useState)([]),n=Object(Y.default)(Z,2),m=n[0],g=n[1],H=Object(w.useState)([]),G=Object(Y.default)(H,2),W=G[0],ye=G[1],ne=$(c),k=ne.metaDim,le=ne.metaInd,q=le.map(r=>{var o=r.id,y=r.name,A=r.isRate;return{name:y,code:o,align:"right",expression:A?"AVG(".concat(o,")"):"SUM(".concat(o,")")}}),ie=k.filter((r,o)=>o<j),_=ie.map(r=>{var o=r.id;return o}),je=Object(z.b)(C,_,{includeTopWrapper:!0,isExpand:S?r=>W.includes(r):void 0}),Oe=Object(z.d)(je,{indicators:K==="left"?q:void 0,supportsExpand:S,expandKeys:W,onChangeExpandKeys:ye,generateSubtotalNode:a?r=>({position:"start",value:r.path.length===0?p[0]||"\u603B\u8BA1":p[1]||"\u5C0F\u8BA1"}):void 0}),Se=Object(Y.default)(Oe,1),de=Se[0],oe=k.filter((r,o)=>o>=j),ve=oe.map(r=>{var o=r.id;return o}),Ce=Object(z.b)(C,ve,{includeTopWrapper:!0,isExpand:d?r=>m.includes(r):void 0}),Re=Object(z.d)(Ce,{indicators:K==="top"?q:void 0,supportsExpand:d,expandKeys:m,onChangeExpandKeys:g,generateSubtotalNode:a?r=>({position:"start",value:r.path.length===0?p[0]||"\u603B\u8BA1":p[1]||"\u5C0F\u8BA1"}):void 0}),Ae=Object(Y.default)(Re,1),ue=Ae[0],Ne=Object(z.c)({data:C,leftCodes:_,topCodes:ve,aggregate:Object(he.a)(q)});return b.a.createElement("div",{style:h,className:"CR-PivotTable CR-PivotTable-".concat(R," ").concat(l||"")},b.a.createElement(z.a,Object(F.default)({defaultColumnWidth:100,leftMetaColumns:k.filter(r=>{var o=r.id;return _.includes(o)}).map(r=>{var o=r.id,y=r.name;return{code:o,name:y}}),leftTree:de.children,leftTotalNode:de,topTree:ue.children,topTotalNode:ue,getValue:(r,o)=>{var y,A=(y=Ne.get(r.data.dataKey))===null||y===void 0?void 0:y.get(o.data.dataKey);return A==null?void 0:A[o.code]},render:(r,o,y)=>{var A;if(L){var se=o.data.dataPath,Ke=se===void 0?[]:se,ce=y.data.dataPath,De=ce===void 0?[]:ce,ee={};return Ke.forEach((Q,X)=>{var P;ee[(P=ie[X])===null||P===void 0?void 0:P.id]=Q}),De.forEach((Q,X)=>{var P;ee[(P=oe[X])===null||P===void 0?void 0:P.id]=Q}),L(r,ee,y.code)}return(A=le.find(Q=>{var X=Q.id;return X===y.code}))!==null&&A!==void 0&&A.isRate?"".concat(B(r*100).toFixed(2),"%"):r}},V)))},Te=xe},ARb9:function(me,I,s){}}]);
